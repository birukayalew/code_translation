[
  {
    "type": "struct",
    "code": "struct MyBuffer {\n    ptr: *mut u8,\n    len: usize,\n}",
    "source_file": "non_idiomatic.rs"
  },
  {
    "type": "impl",
    "code": "impl MyBuffer {\n    fn new(size: usize) -> MyBuffer {\n        let raw_ptr: *mut u8 = unsafe { libc::malloc(size) as *mut u8 };\n        MyBuffer {\n            ptr: raw_ptr,\n            len: size,\n        }\n    }\n\n    fn clear(&mut self) {\n        unsafe { ptr::write_bytes(self.ptr, 0, self.len); }\n    }\n}",
    "source_file": "non_idiomatic.rs"
  },
  {
    "type": "function",
    "code": "fn main() {\n    let mut buf = MyBuffer::new(100);\n    buf.clear();\n}",
    "source_file": "non_idiomatic.rs"
  }
]